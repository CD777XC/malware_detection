# Importing common libraries
import numpy as np

import matplotlib.pyplot as plt
import seaborn as sns

# Importing preprocessing libraries functions
from sklearn.preprocessing import StandardScaler, MinMaxScaler, RobustScaler
from sklearn.pipeline import Pipeline, make_pipeline
from sklearn.compose import make_column_selector, make_column_transformer

# Loading environment variable
import os
from dotenv import load_dotenv
load_dotenv()

data = pd.read_csv(os.getenv("DATA"), sep="|")

# Defining X and y on a copy of data
X = data.drop(columns="legitimate").copy()
y = data['legitimate'].copy()

# Dropping numerical object columns
X = X.select_dtypes(exclude="object")

# Exctracting correlation columns
def significant_corr(df, pos_threshold, neg_threshold):
    pos_corr = df.corr().where(df.corr() > pos_threshold).where(df.corr() < 1).count()
    neg_corr = df.corr().where(df.corr() < neg_threshold).where(df.corr() > -1).count()
    col_list = [column for column in pos_corr.keys() if pos_corr[column] > 0]
    col_list += [column for column in neg_corr.keys() if neg_corr[column] > 0]
    return col_list
